{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tshen\\\\Desktop\\\\UrbanCart\\\\frontend\\\\src\\\\context\\\\OrderContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState } from 'react';\nimport axios from 'axios';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderContext = /*#__PURE__*/createContext();\nexport const OrderProvider = ({\n  children\n}) => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const {\n    userInfo\n  } = useAuth();\n  const createOrder = async orderData => {\n    try {\n      setLoading(true);\n      setError('');\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${userInfo === null || userInfo === void 0 ? void 0 : userInfo.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.post('http://localhost:8001/api/orders', orderData, config);\n      setLoading(false);\n      return data;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setLoading(false);\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message);\n      throw error;\n    }\n  };\n  const getOrderDetails = async orderId => {\n    try {\n      setLoading(true);\n      setError('');\n      const config = {\n        headers: {\n          Authorization: `Bearer ${userInfo === null || userInfo === void 0 ? void 0 : userInfo.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.get(`http://localhost:8001/api/orders/${orderId}`, config);\n      setLoading(false);\n      return data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      setLoading(false);\n      setError(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || error.message);\n      throw error;\n    }\n  };\n  const payOrder = async (orderId, paymentResult) => {\n    try {\n      setLoading(true);\n      setError('');\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${userInfo === null || userInfo === void 0 ? void 0 : userInfo.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.put(`http://localhost:8001/api/orders/${orderId}/pay`, paymentResult, config);\n      setLoading(false);\n      return data;\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      setLoading(false);\n      setError(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || error.message);\n      throw error;\n    }\n  };\n  const getMyOrders = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const config = {\n        headers: {\n          Authorization: `Bearer ${userInfo === null || userInfo === void 0 ? void 0 : userInfo.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.get('http://localhost:8001/api/orders/myorders', config);\n      setLoading(false);\n      return data;\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      setLoading(false);\n      setError(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || error.message);\n      throw error;\n    }\n  };\n  const clearError = () => {\n    setError('');\n  };\n  return /*#__PURE__*/_jsxDEV(OrderContext.Provider, {\n    value: {\n      loading,\n      error,\n      createOrder,\n      getOrderDetails,\n      payOrder,\n      getMyOrders,\n      clearError\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderProvider, \"asodzLcGZrlP/7+Xfv2yjfKku+k=\", false, function () {\n  return [useAuth];\n});\n_c = OrderProvider;\nexport const useOrder = () => {\n  _s2();\n  const context = useContext(OrderContext);\n  if (context === undefined) {\n    throw new Error('useOrder must be used within an OrderProvider');\n  }\n  return context;\n};\n_s2(useOrder, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"OrderProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","axios","useAuth","jsxDEV","_jsxDEV","OrderContext","OrderProvider","children","_s","loading","setLoading","error","setError","userInfo","createOrder","orderData","config","headers","Authorization","token","data","post","_error$response","_error$response$data","response","message","getOrderDetails","orderId","get","_error$response2","_error$response2$data","payOrder","paymentResult","put","_error$response3","_error$response3$data","getMyOrders","_error$response4","_error$response4$data","clearError","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useOrder","_s2","context","undefined","Error","$RefreshReg$"],"sources":["C:/Users/tshen/Desktop/UrbanCart/frontend/src/context/OrderContext.js"],"sourcesContent":["import React, { createContext, useContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst OrderContext = createContext();\r\n\r\nexport const OrderProvider = ({ children }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const { userInfo } = useAuth();\r\n\r\n  const createOrder = async (orderData) => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${userInfo?.token}`,\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.post(\r\n        'http://localhost:8001/api/orders',\r\n        orderData,\r\n        config\r\n      );\r\n\r\n      setLoading(false);\r\n      return data;\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error.response?.data?.message || error.message);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const getOrderDetails = async (orderId) => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${userInfo?.token}`,\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.get(\r\n        `http://localhost:8001/api/orders/${orderId}`,\r\n        config\r\n      );\r\n\r\n      setLoading(false);\r\n      return data;\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error.response?.data?.message || error.message);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const payOrder = async (orderId, paymentResult) => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${userInfo?.token}`,\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.put(\r\n        `http://localhost:8001/api/orders/${orderId}/pay`,\r\n        paymentResult,\r\n        config\r\n      );\r\n\r\n      setLoading(false);\r\n      return data;\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error.response?.data?.message || error.message);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const getMyOrders = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${userInfo?.token}`,\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.get(\r\n        'http://localhost:8001/api/orders/myorders',\r\n        config\r\n      );\r\n\r\n      setLoading(false);\r\n      return data;\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error.response?.data?.message || error.message);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const clearError = () => {\r\n    setError('');\r\n  };\r\n\r\n  return (\r\n    <OrderContext.Provider\r\n      value={{\r\n        loading,\r\n        error,\r\n        createOrder,\r\n        getOrderDetails,\r\n        payOrder,\r\n        getMyOrders,\r\n        clearError,\r\n      }}\r\n    >\r\n      {children}\r\n    </OrderContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useOrder = () => {\r\n  const context = useContext(OrderContext);\r\n  if (context === undefined) {\r\n    throw new Error('useOrder must be used within an OrderProvider');\r\n  }\r\n  return context;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}