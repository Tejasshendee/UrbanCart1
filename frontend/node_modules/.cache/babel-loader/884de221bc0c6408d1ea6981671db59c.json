{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tshen\\\\Desktop\\\\UrbanCart\\\\frontend\\\\src\\\\context\\\\ProductContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer } from 'react';\nimport axios from 'axios';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductContext = /*#__PURE__*/createContext();\nconst productReducer = (state, action) => {\n  switch (action.type) {\n    case 'PRODUCT_CREATE_REQUEST':\n      return {\n        ...state,\n        loading: true\n      };\n    case 'PRODUCT_CREATE_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        success: true,\n        product: action.payload,\n        error: null\n      };\n    case 'PRODUCT_CREATE_FAIL':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n        success: false\n      };\n    case 'PRODUCT_CREATE_RESET':\n      return {\n        ...state,\n        loading: false,\n        success: false,\n        product: null,\n        error: null\n      };\n    case 'PRODUCT_UPDATE_REQUEST':\n      return {\n        ...state,\n        loading: true\n      };\n    case 'PRODUCT_UPDATE_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        success: true,\n        product: action.payload,\n        error: null\n      };\n    case 'PRODUCT_UPDATE_FAIL':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n        success: false\n      };\n    case 'PRODUCT_DELETE_REQUEST':\n      return {\n        ...state,\n        loading: true\n      };\n    case 'PRODUCT_DELETE_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        success: true,\n        error: null\n      };\n    case 'PRODUCT_DELETE_FAIL':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n        success: false\n      };\n    case 'CLEAR_ERROR':\n      return {\n        ...state,\n        error: null\n      };\n    default:\n      return state;\n  }\n};\nconst initialState = {\n  loading: false,\n  success: false,\n  product: null,\n  error: null\n};\nexport const ProductProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(productReducer, initialState);\n  const {\n    userInfo\n  } = useAuth();\n  const createProduct = async () => {\n    try {\n      dispatch({\n        type: 'PRODUCT_CREATE_REQUEST'\n      });\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${userInfo === null || userInfo === void 0 ? void 0 : userInfo.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.post('http://localhost:8001/api/products', {}, config);\n      dispatch({\n        type: 'PRODUCT_CREATE_SUCCESS',\n        payload: data\n      });\n      return data;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      dispatch({\n        type: 'PRODUCT_CREATE_FAIL',\n        payload: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message\n      });\n      throw error;\n    }\n  };\n  const updateProduct = async product => {\n    try {\n      dispatch({\n        type: 'PRODUCT_UPDATE_REQUEST'\n      });\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${userInfo === null || userInfo === void 0 ? void 0 : userInfo.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.put(`http://localhost:8001/api/products/${product._id}`, product, config);\n      dispatch({\n        type: 'PRODUCT_UPDATE_SUCCESS',\n        payload: data\n      });\n      return data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      dispatch({\n        type: 'PRODUCT_UPDATE_FAIL',\n        payload: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || error.message\n      });\n      throw error;\n    }\n  };\n  const deleteProduct = async productId => {\n    try {\n      dispatch({\n        type: 'PRODUCT_DELETE_REQUEST'\n      });\n      const config = {\n        headers: {\n          Authorization: `Bearer ${userInfo === null || userInfo === void 0 ? void 0 : userInfo.token}`\n        }\n      };\n      await axios.delete(`http://localhost:8001/api/products/${productId}`, config);\n      dispatch({\n        type: 'PRODUCT_DELETE_SUCCESS'\n      });\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      dispatch({\n        type: 'PRODUCT_DELETE_FAIL',\n        payload: ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || error.message\n      });\n      throw error;\n    }\n  };\n  const clearError = () => {\n    dispatch({\n      type: 'CLEAR_ERROR'\n    });\n  };\n  const resetCreate = () => {\n    dispatch({\n      type: 'PRODUCT_CREATE_RESET'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(ProductContext.Provider, {\n    value: {\n      loading: state.loading,\n      success: state.success,\n      product: state.product,\n      error: state.error,\n      createProduct,\n      updateProduct,\n      deleteProduct,\n      clearError,\n      resetCreate\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductProvider, \"lFW1P2LBBqdXouYjEvVGUZioFyo=\", false, function () {\n  return [useAuth];\n});\n_c = ProductProvider;\nexport const useProduct = () => {\n  _s2();\n  const context = useContext(ProductContext);\n  if (context === undefined) {\n    throw new Error('useProduct must be used within a ProductProvider');\n  }\n  return context;\n};\n_s2(useProduct, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"ProductProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","axios","useAuth","jsxDEV","_jsxDEV","ProductContext","productReducer","state","action","type","loading","success","product","payload","error","initialState","ProductProvider","children","_s","dispatch","userInfo","createProduct","config","headers","Authorization","token","data","post","_error$response","_error$response$data","response","message","updateProduct","put","_id","_error$response2","_error$response2$data","deleteProduct","productId","delete","_error$response3","_error$response3$data","clearError","resetCreate","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useProduct","_s2","context","undefined","Error","$RefreshReg$"],"sources":["C:/Users/tshen/Desktop/UrbanCart/frontend/src/context/ProductContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer } from 'react';\r\nimport axios from 'axios';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst ProductContext = createContext();\r\n\r\nconst productReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'PRODUCT_CREATE_REQUEST':\r\n      return { ...state, loading: true };\r\n    \r\n    case 'PRODUCT_CREATE_SUCCESS':\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        success: true,\r\n        product: action.payload,\r\n        error: null,\r\n      };\r\n    \r\n    case 'PRODUCT_CREATE_FAIL':\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload,\r\n        success: false,\r\n      };\r\n    \r\n    case 'PRODUCT_CREATE_RESET':\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        success: false,\r\n        product: null,\r\n        error: null,\r\n      };\r\n    \r\n    case 'PRODUCT_UPDATE_REQUEST':\r\n      return { ...state, loading: true };\r\n    \r\n    case 'PRODUCT_UPDATE_SUCCESS':\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        success: true,\r\n        product: action.payload,\r\n        error: null,\r\n      };\r\n    \r\n    case 'PRODUCT_UPDATE_FAIL':\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload,\r\n        success: false,\r\n      };\r\n    \r\n    case 'PRODUCT_DELETE_REQUEST':\r\n      return { ...state, loading: true };\r\n    \r\n    case 'PRODUCT_DELETE_SUCCESS':\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        success: true,\r\n        error: null,\r\n      };\r\n    \r\n    case 'PRODUCT_DELETE_FAIL':\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload,\r\n        success: false,\r\n      };\r\n    \r\n    case 'CLEAR_ERROR':\r\n      return { ...state, error: null };\r\n    \r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  loading: false,\r\n  success: false,\r\n  product: null,\r\n  error: null,\r\n};\r\n\r\nexport const ProductProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(productReducer, initialState);\r\n  const { userInfo } = useAuth();\r\n\r\n  const createProduct = async () => {\r\n    try {\r\n      dispatch({ type: 'PRODUCT_CREATE_REQUEST' });\r\n\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${userInfo?.token}`,\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.post(\r\n        'http://localhost:8001/api/products',\r\n        {},\r\n        config\r\n      );\r\n\r\n      dispatch({ type: 'PRODUCT_CREATE_SUCCESS', payload: data });\r\n      return data;\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'PRODUCT_CREATE_FAIL',\r\n        payload: error.response?.data?.message || error.message,\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const updateProduct = async (product) => {\r\n    try {\r\n      dispatch({ type: 'PRODUCT_UPDATE_REQUEST' });\r\n\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${userInfo?.token}`,\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.put(\r\n        `http://localhost:8001/api/products/${product._id}`,\r\n        product,\r\n        config\r\n      );\r\n\r\n      dispatch({ type: 'PRODUCT_UPDATE_SUCCESS', payload: data });\r\n      return data;\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'PRODUCT_UPDATE_FAIL',\r\n        payload: error.response?.data?.message || error.message,\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const deleteProduct = async (productId) => {\r\n    try {\r\n      dispatch({ type: 'PRODUCT_DELETE_REQUEST' });\r\n\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${userInfo?.token}`,\r\n        },\r\n      };\r\n\r\n      await axios.delete(\r\n        `http://localhost:8001/api/products/${productId}`,\r\n        config\r\n      );\r\n\r\n      dispatch({ type: 'PRODUCT_DELETE_SUCCESS' });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'PRODUCT_DELETE_FAIL',\r\n        payload: error.response?.data?.message || error.message,\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const clearError = () => {\r\n    dispatch({ type: 'CLEAR_ERROR' });\r\n  };\r\n\r\n  const resetCreate = () => {\r\n    dispatch({ type: 'PRODUCT_CREATE_RESET' });\r\n  };\r\n\r\n  return (\r\n    <ProductContext.Provider\r\n      value={{\r\n        loading: state.loading,\r\n        success: state.success,\r\n        product: state.product,\r\n        error: state.error,\r\n        createProduct,\r\n        updateProduct,\r\n        deleteProduct,\r\n        clearError,\r\n        resetCreate,\r\n      }}\r\n    >\r\n      {children}\r\n    </ProductContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useProduct = () => {\r\n  const context = useContext(ProductContext);\r\n  if (context === undefined) {\r\n    throw new Error('useProduct must be used within a ProductProvider');\r\n  }\r\n  return context;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}